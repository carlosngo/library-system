{% extends "base_generic.html" %}
{% block content %}
{% load static %}
{% load has_group %}
<section class="page-section">
    <div class="modal fade" role="dialog" tabindex="-1" id="review-modal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Review</h4><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div>
                <div class="modal-body d-flex flex-grow-1"><input type="text" class="review-input"></div>
                <div class="modal-footer"><button class="btn btn-light" type="button" data-dismiss="modal">Close</button><button class="btn btn-primary" type="button">Submit</button></div>
            </div>
        </div>
    </div>
    
    <div class="modal fade" role="dialog" tabindex="-1" id="delete-modal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Delete Book</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div>
                <div class="modal-body d-flex flex-grow-1">
                    <p>Are you sure you want to delete this book?</p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-light" type="button" data-dismiss="modal">Close</button>
                    <form action="{% url 'deleteBook' %}" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="book-id" value="{{ book_details.id }}"> 
                        <button class="btn btn-primary delete-button" type="submit">Delete Book</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="product-item">
            <div class="d-flex product-item-title">
                <div class="d-flex mr-auto bg-faded p-5 rounded">
                    <h2 class="section-heading mb-0"><span class="section-heading-upper">{{ book_details.author.first_name }}&nbsp;{{ book_details.author.last_name }}</span><span class="section-heading-lower">{{ book_details.name }}</span><span class="section-heading-upper">{{ book_details.publisher.name }}</span><span class="section-heading-upper">{{ book_details.isbn }}</span></h2>
                </div>
                <div class="btn-group d-lg-flex align-items-lg-center" role="group">
                    {% if user|has_group:"Users" %}
                    <button class="btn btn-primary" type="button" data-toggle="modal" data-target="#review-modal">Review</button>
                    {% endif %}
                    {% if user|has_group:"Managers" %}
                    <form action="{% url 'updateBook' %}" method="GET">
                        <input type="hidden" name="book-id" value="{{ book_details.id }}"> 
                        <button class="btn btn-primary" type="submit">Edit</button>
                    </form>
                    
                    <button class="btn btn-primary delete-button" type="button" data-toggle="modal" data-target="#delete-modal">Delete</button>
                    {% endif %}
                </div>
            </div><img class="img-fluid d-flex mx-auto product-item-img mb-3 mb-lg-0 rounded" src="{% static 'img/generic.jpg' %}">
            
        </div>
    </div>
</section>
<section class="page-section">
    <div class="container">
        <div class="product-item">
            <div class="d-flex product-item-title">
                <div class="d-flex mx-auto bg-faded p-5 rounded">
                    <h2 class="section-heading mb-0"><span class="section-heading-lower">Copies</span></h2>
                </div>
            </div>
            <div class="bg-faded p-5 rounded">
                <ul class="list-unstyled mx-auto list-hours text-left mt-5">
                    <li class="list-unstyled-item list-hours-item d-flex">
                        <div><span>Reviewer Name</span>
                            <p class="mb-0">Review Details</p>
                        </div>
                    </li>
                    <li class="list-unstyled-item list-hours-item d-flex">
                        <div><span>Reviewer Name</span>
                            <p class="mb-0">Review Details</p>
                        </div>
                    </li>
                    <li class="list-unstyled-item list-hours-item d-flex">
                        <div><span>Reviewer Name</span>
                            <p class="mb-0">Review Details</p>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</section>
<section class="page-section">
    <div class="container">
        <div class="product-item">
            <div class="d-flex product-item-title">
                <div class="d-flex mx-auto bg-faded p-5 rounded">
                    <h2 class="section-heading mb-0"><span class="section-heading-lower">Reviews</span></h2>
                </div>
            </div>
            <div class="bg-faded p-5 rounded">
                <ul class="list-unstyled mx-auto list-hours text-left mt-5">
                    <li class="list-unstyled-item list-hours-item d-flex">
                        <div><span>Reviewer Name</span>
                            <p class="mb-0">Review Details</p>
                        </div>
                    </li>
                    <li class="list-unstyled-item list-hours-item d-flex">
                        <div><span>Reviewer Name</span>
                            <p class="mb-0">Review Details</p>
                        </div>
                    </li>
                    <li class="list-unstyled-item list-hours-item d-flex">
                        <div><span>Reviewer Name</span>
                            <p class="mb-0">Review Details</p>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</section>
{% endblock %}