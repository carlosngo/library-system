{% extends "base_generic.html" %}
{% block content %}
{% load static %}
<section class="page-section">
    <div class="modal fade" role="dialog" tabindex="-1" id="review-modal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Review</h4><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div>
                <div class="modal-body d-flex flex-grow-1"><input type="text" class="review-input"></div>
                <div class="modal-footer"><button class="btn btn-light" type="button" data-dismiss="modal">Close</button><button class="btn btn-primary" type="button">Submit</button></div>
            </div>
        </div>
    </div>
    <div class="modal fade" role="dialog" tabindex="-1" id="edit-modal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Edit Book</h4><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div>
                <div class="modal-body d-flex flex-grow-1">
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr></tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Title</td>
                                    <td><input type="text"></td>
                                </tr>
                                <tr>
                                    <td>Author</td>
                                    <td><select><optgroup label="This is a group"><option value="12" selected="">This is item 1</option><option value="13">This is item 2</option><option value="14">This is item 3</option></optgroup></select></td>
                                </tr>
                                <tr>
                                    <td>Cover</td>
                                    <td><input type="file"></td>
                                </tr>
                                <tr>
                                    <td>Publisher</td>
                                    <td><input type="text"></td>
                                </tr>
                                <tr>
                                    <td>ISBN</td>
                                    <td><input type="text"></td>
                                </tr>
                                <tr>
                                    <td>Summary</td>
                                    <td><input type="text" class="review-input"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer"><button class="btn btn-light" type="button" data-dismiss="modal">Close</button><button class="btn btn-primary" type="button">Save</button></div>
            </div>
        </div>
    </div>
    <div class="modal fade" role="dialog" tabindex="-1" id="delete-modal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Delete Book</h4><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div>
                <div class="modal-body d-flex flex-grow-1">
                    <p>Are you sure you want to delete this book?</p>
                </div>
                <div class="modal-footer"><button class="btn btn-light" type="button" data-dismiss="modal">Close</button><button class="btn btn-primary delete-button" type="button">Delete Book</button></div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="product-item">
            <div class="d-flex product-item-title">
                <div class="d-flex mr-auto bg-faded p-5 rounded">
                    <h2 class="section-heading mb-0"><span class="section-heading-upper">{{ book_details.author.first_name }}&nbsp;{{ book_details.author.last_name }}</span><span class="section-heading-lower">{{ book_details.name }}</span><span class="section-heading-upper">{{ book_details.publisher.name }}</span><span class="section-heading-upper">{{ book_details.isbn }}</span></h2>
                </div>
                <div class="btn-group d-lg-flex align-items-lg-center" role="group"><button class="btn btn-primary" type="button">Borrow/Return</button><button class="btn btn-primary" type="button" data-toggle="modal" data-target="#review-modal">Review</button><button class="btn btn-primary" type="button" data-toggle="modal" data-target="#edit-modal">Edit</button><button class="btn btn-primary delete-button"
                        type="button" data-toggle="modal" data-target="#delete-modal">Delete</button></div>
            </div><img class="img-fluid d-flex mx-auto product-item-img mb-3 mb-lg-0 rounded" src="{% static 'img/generic.jpg' %}">
            <div class="bg-faded p-5 rounded">
                <p class="mb-0">{{ book_details.summary }}</p>
            </div>
        </div>
    </div>
</section>

<div style="margin-left:20px;margin-top:20px">
        <h4>Copies</h4>
    
        {% for copy in book.bookinstance_set.all %}
          <hr>
          <p class="{% if copy.status == 'a' %}text-success{% elif copy.status == 'm' %}text-danger{% else %}text-warning{% endif %}">
            {{ copy.get_status_display }}
          </p>
          {% if copy.status != 'a' %}
            <p><strong>Due to be returned:</strong> {{ copy.due_back }}</p>
          {% endif %}
          <p><strong>Imprint:</strong> {{ copy.imprint }}</p>
          <p class="text-muted"><strong>Id:</strong> {{ copy.id }}</p>
        {% endfor %}
</div>


<section class="page-section">
    <div class="container">
        <div class="product-item">
            <div class="d-flex product-item-title">
                <div class="d-flex mx-auto bg-faded p-5 rounded">
                    <h2 class="section-heading mb-0"><span class="section-heading-lower">Reviews</span></h2>
                </div>
            </div>
            <div class="bg-faded p-5 rounded">
                {% if book_details %}
                <ul class="list-unstyled mx-auto list-hours text-left mt-5">
                    {% for review in book_details %}
                    <li class="list-unstyled-item list-hours-item d-flex">
                        <div><span>{{ review.reviewer }}</span>
                            <p class="mb-0">{{ review.text }}</p>
                        </div>
                        {% endfor %}
                    </li>
                </ul>
                {% else %}
                    <p>There are no reviews for this book.</p>
                {% endif %} 
            </div>
        </div>
    </div>
</section>
{% endblock %}